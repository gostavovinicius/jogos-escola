<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jogos Educativos</title>
    <!-- CSS atualizado para o tema Cartoon V2 -->
    <link rel="stylesheet" href="estilo.css" />
  </head>
  <body>
    <!-- Removido o link "Pular para o conteúdo" e badges de Natal -->

    <header>
      <div class="brand-container">
        <h1>Jogos Educativos</h1>
      </div>
      <p class="subtitle">Escolha sua diversão!</p>
    </header>

    <main id="main-content">
      <section class="game-grid">
        <!-- Jogo 1 -->
        <a href="jogos/cemei/jogoDaMemoria.html" class="game-card">
          <img
            src="https://screens.cdn.wordwall.net/200/4a4638bbbe7c44f894c88d65633625b3_65"
            alt="Jogo da memoria"
            loading="lazy"
          />
          <h3>Jogo da Memoria</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <!-- Jogo 3 -->
        <a href="jogos/cemei/letra_inicial.html" class="game-card">
          <img
            src="https://www.coquinhos.com/wp-content/uploads/thumbs/custom/J/jogo-letra-inicial-portugues.jpg"
            alt="Jogo da letra inicial"
            loading="lazy"
          />
          <h3>Aperte na Inicial</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <!-- Jogo 11 -->
        <a href="jogos/cemei/jogo_memoria.html" class="game-card">
          <img
            src="https://www.coquinhos.com/wp-content/uploads/2021/10/pares-animais-150x150.jpg"
            alt="Jogo da Memória"
            loading="lazy"
          />
          <h3>Jogo da Memória</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <!-- Jogo 13 -->
        <a href="jogos/cemei/alfabeto.html" class="game-card">
          <img
            src="https://www.coquinhos.com/wp-content/uploads/2020/07/jogo-ordenacao-alfabeto-150x150.jpg"
            alt="Jogo do Alfabeto"
            loading="lazy"
          />
          <h3>Alfabeto</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <!-- Jogo 2 -->
        <a href="jogos/cemei/jogoDaMemoria2.html" class="game-card">
          <img
            src="https://screens.cdn.wordwall.net/200/21d7ac297077432db5493baa904fa7c2_0"
            alt="Jogo da memoria 2"
            loading="lazy"
          />
          <h3>Jogo da Memoria</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <!-- Jogo 17 -->
        <a href="jogos/cemei/quebraCabeca.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/quebra-cabeca-animais.jpg"
            alt="Quebra Cabeça"
            loading="lazy"
          />
          <h3>Quebra-Cabeça 2</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/AEIOU.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/AEIOU-Vogais.jpg"
            alt="Jogo das Vogais"
            loading="lazy"
          />
          <h3>Jogo das Vogais</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/animaisEFormas.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/animais-e-formas.jpg"
            alt="Animais e suas formas"
            loading="lazy"
          />
          <h3>Alfabeto</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/quebra_cabeca.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/quebra-cabeca-animais-marinhos.jpg"
            alt="Quebra Cabeça"
            loading="lazy"
          />
          <h3>Quebra-Cabeça</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/encaixaNaCaixa.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/encaixa-na-caixa.jpg"
            alt="Encaixa na Caixa"
            loading="lazy"
          />
          <h3>Encaixa na Caixa</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/cincoErros.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/cinco-erros.jpg"
            alt="Cinco Erros"
            loading="lazy"
          />
          <h3>Cinco Erros</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>

        <a href="jogos/cemei/quebraCabecaMaternal.html" class="game-card">
          <img
            src="https://hvirtua.com/jogoseducativos/wp-content/uploads/2024/02/quebra-cabeca-maternal.jpg"
            alt="Quebra-Cabeça Maternal"
            loading="lazy"
          />
          <h3>Quebra-Cabeça Maternal</h3>
          <span class="play-btn">Jogar Agora</span>
        </a>
      </section>
    </main>
    <script>
      (() => {
        const MAX_SHOW = 8;
        const STORAGE_KEY = "cemei_last_games_v1";

        function shuffle(arr) {
          for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
          }
          return arr;
        }

        function pickRandomSixDifferent(cards) {
          const last = (() => {
            try {
              return JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "[]");
            } catch {
              return [];
            }
          })();

          // Try a few times to avoid repetir exatamente o mesmo conjunto
          let chosen = [];
          for (let attempt = 0; attempt < 12; attempt++) {
            const shuffled = shuffle(cards.slice());
            chosen = shuffled.slice(0, Math.min(MAX_SHOW, shuffled.length));
            const chosenHrefs = chosen.map((a) => a.getAttribute("href"));
            const sameAsLast =
              last.length === chosenHrefs.length &&
              last.every((v) => chosenHrefs.includes(v));

            if (!sameAsLast) {
              sessionStorage.setItem(STORAGE_KEY, JSON.stringify(chosenHrefs));
              return chosen;
            }
          }

          // Fallback (se não conseguir “diferente”)
          sessionStorage.setItem(
            STORAGE_KEY,
            JSON.stringify(chosen.map((a) => a.getAttribute("href"))),
          );
          return chosen;
        }

        function refreshGameGrid() {
          const grid = document.querySelector(".game-grid");
          if (!grid) return;

          const allCards = Array.from(grid.querySelectorAll(".game-card"));
          if (allCards.length <= MAX_SHOW) return;

          const chosen = pickRandomSixDifferent(allCards);

          // Re-monta o grid só com os escolhidos (na ordem aleatória)
          grid.innerHTML = "";
          chosen.forEach((card) => grid.appendChild(card));
        }

        // Executa quando carrega e também quando volta via "Voltar" do navegador (bfcache)
        window.addEventListener("pageshow", refreshGameGrid);
      })();
    </script>
  </body>
</html>
